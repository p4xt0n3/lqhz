<!doctype html>
<html lang="zh-CN">
<head>
  <!-- ...existing head... -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>猎奇回战官网</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <!-- Import Map -->
  <script type="importmap">
  {
    "imports": {
      "mitt": "https://esm.sh/mitt@3.0.1",
      "jszip": "https://esm.sh/jszip@3.10.1"
    }
  }
  </script>
  <link rel="icon" href="qsnbl.png" type="image/png">
</head>
<body>
  <!-- ...existing content... -->
  <main class="cover">
    <img src="lqhz.jpeg" alt="猎奇回战官网封面" class="cover-image">
    <!-- Content area where comics render -->
    <section id="reader" aria-live="polite">
      <!-- 初始为空，选择目录后加载 -->
    </section>

    <!-- Navigation controls: previous / next chapter -->
    <div class="nav-controls" aria-hidden="false">
      <button id="prevBtn" class="nav-btn" aria-label="上一章" title="上一章">←</button>
      <button id="nextBtn" class="nav-btn" aria-label="下一章" title="下一章">→</button>
    </div>
  </main>

  <!-- Bottom-left Control Button -->
  <button id="contactBtn" class="contact-btn" aria-haspopup="dialog" aria-controls="contactModal" aria-label="联系信息">i</button>
  <button id="catalogBtn" class="catalog-btn" aria-haspopup="dialog" aria-controls="catalogModal" aria-label="打开目录">C</button>

  <!-- Download button (top-left) -->
  <button id="downloadBtn" class="download-btn" aria-label="下载全部">⬇</button>
  <!-- Download specific parts button (small square under download) -->
  <button id="downloadPartBtn" class="download-part-btn" aria-label="下载指定章节">▣</button>

  <!-- Ciallo button (bottom-right) -->
  <button id="cialloBtn" class="ciallo-btn" aria-label="Ciallo 按钮">Ciallo～(∠・ω&lt; )</button>

  <!-- Count badge exists via JS -->
  <!-- Donate button (top-right under count badge) -->
  <button id="donateBtn" class="donate-btn" aria-label="捐赠">捐赠</button>

  <!-- Contact Modal -->
  <div id="contactModal" class="contact-modal modal" role="dialog" aria-modal="true" aria-labelledby="contactTitle" hidden>
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel small">
      <header class="modal-header">
        <h3 id="contactTitle">我知道你在看</h3>
        <button class="close-btn" data-close aria-label="关闭">×</button>
      </header>
      <div class="modal-body contact-body">
        <p>猎奇回战QQ群：384441662</p>
        <p>猎奇回战作者QQ：1736731564</p>
        <p class="qr-label">猎奇回战群二维码</p>
        <img src="lqhzqr.png" alt="猎奇回战群二维码" class="qr-img">
      </div>
    </div>
  </div>

  <!-- Catalog Modal -->
  <div id="catalogModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="catalogTitle" hidden>
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel">
      <header class="modal-header">
        <h2 id="catalogTitle">猎奇回战目录</h2>
        <button class="close-btn" data-close aria-label="关闭">×</button>
      </header>
      <div class="modal-body">
        <div id="catalogPages" class="catalog-pages" role="tablist" aria-label="目录页码">
          <!-- Page buttons will be rendered here -->
          <button type="button" class="page-btn" data-page="1" aria-pressed="true">第1页</button>
          <button type="button" class="page-btn" data-page="2">第1+1页</button>
          <button type="button" class="page-btn" data-page="3">第1+2页</button>
          <button type="button" class="page-btn" data-page="4">第√16页</button>
          <button type="button" class="page-btn" data-page="5">第√5*√5页</button>
        </div>
        <nav class="catalog-grid" id="catalogList" aria-label="章节列表">
          <!-- P1 - P43 -->
          <!-- 将由 JS 填充 -->
        </nav>
      </div>
    </div>
  </div>

  <!-- Part-download Modal -->
  <div id="partDownloadModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="partDownloadTitle" hidden>
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel">
      <header class="modal-header">
        <h2 id="partDownloadTitle">选择要下载的章节</h2>
        <button class="close-btn" data-close aria-label="关闭">×</button>
      </header>
      <div class="modal-body">
        <div id="partDownloadList" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:8px;max-height:56vh;overflow:auto;padding:8px 0;">
          <!-- checkboxes rendered by JS -->
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
          <button id="partDownloadCancel" class="close-btn" data-close>取消</button>
          <button id="partDownloadDo" class="page-btn" aria-pressed="false">下载所选</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Donate Modal -->
  <div id="donateModal" class="modal donate-modal" role="dialog" aria-modal="true" aria-labelledby="donateTitle" hidden>
    <div class="modal-backdrop" data-close></div>
    <div class="modal-panel medium">
      <header class="modal-header">
        <h3 id="donateTitle">请捐赠，一点点也好</h3>
      </header>
      <div class="modal-body" style="text-align:center;">
        <img src="dnt.png" alt="捐赠二维码或图片" style="max-width:320px;width:80%;height:auto;border:1px solid var(--border);background:#fff;margin:8px auto;display:block;">
        <div style="margin-top:8px;font-size:13px;color:var(--muted);font-weight:600;">无论多少都可以的555</div>
      </div>
    </div>
  </div>

  <script type="module" src="password.js"></script>
  <script type="module" src="hzone.js"></script>
  <script type="module" src="music.js"></script>
  <script type="module" src="donate.js"></script>
  <script type="module" src="app.js"></script>
  <!-- ...existing content... -->
</body>
</html>
